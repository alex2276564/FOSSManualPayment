name: Scheduled Security Scan

on:
  schedule:
    - cron: "0 4 * * *" # every day at 4:00 UTC
  workflow_dispatch: # can be run manually from the GitHub UI

permissions:
  contents: read
  security-events: write
  actions: read

jobs:
  security-scan-snyk:
    name: 🔐 Security Scan Snyk
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@main

      - name: Run Snyk to check for vulnerabilities
        uses: snyk/actions/php@master
        continue-on-error: true # Don't stop the pipeline because maybe snyk api limit
        with:
          args: --severity-threshold=high
